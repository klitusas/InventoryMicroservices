package com.products;

import java.util.HashSet;
import java.util.Set;

import javax.annotation.PostConstruct;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.cloud.client.discovery.EnableDiscoveryClient;

@EnableDiscoveryClient
@SpringBootApplication
public class ProductsServiceApplication {

	public static void main(String[] args) {
		SpringApplication.run(ProductsServiceApplication.class, args);
	}
	
//	protected SpringApplicationBuilder configure(SpringApplicationBuilder builder){
//		return builder.sources(ProductsServiceApplication.class);
//	}
	
	
	@PostConstruct
	public void init(){
		Set<Product> products = new HashSet<>();
		products.add(new Product("DARK Chocolate Sticks", "DARK Chocolate stick with chili", 20.00, "https://www.gourmetfoodworld.com/images/Product/medium/pastry-1-cigarette-sticks-maxi-dark-chocolate-8-inch-1S-1072.jpg", 50, 100 ));
		products.add(new Product("Milk Chocolate with caramel", "Milk chocolate stick with caramel crisp", 25.00, "http://www.foodfinders.com/Images/Product%20Images/Foodfinders/Fullsize/AB72.jpg", 30, 50 ));
		products.add(new Product("Almond Mix", "Almond Mix fra Nutisal er tørristet mandler", 30.00, "http://ladolce-vita.dk/wp-content/uploads/2015/01/IMG_5628.jpg", 60, 70 ));
		products.add(new Product("Twix", "Kiks med blød karamel overtrukket med mælkechokolade", 60.00, "https://www.heinemann-dutyfree.com/media/catalog/product/cache/13/image/9df78eab33525d08d6e5fb8d27136e95/1/0/1072947.jpg", 80, 120 ));
		products.add(new Product("Ritter sport", "Filled to the brim with the best nuts", 35.00, "http://www.ritter-sport.de/export/sites/default/RI_Nuss-Splitter_COM_Produktdetailseite_1380x920.jpg_1021199416.jpg", 30, 200 ));
		products.add(new Product("Pringles Original", "The first flavour to come in the iconic hyperbolic paraboloid", 30.00, "https://images.kglobalservices.com/www.pringles.com_ca_en/en_ca/product/kic-32073/prod_img-1380142_pringles_orig_148g_3d_en.png", 50, 300 ));

		
		Unit unit = new Unit("Ulleval Store", "Oslo", products);
		Unit unit1 = new Unit("Storo Store", "Oslo", null);
		unitDao.save(unit);
		unitDao.save(unit1);
	}
	
	@Autowired UnitDao unitDao;
	@Autowired ProductDao productDao;
}
